<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>esxi on IvoBeerens.NL | All about End User Computing, AVD, W365 and Infrastructure as Code (IaC)</title><link>/categories/esxi/</link><description>Recent content in esxi on IvoBeerens.NL | All about End User Computing, AVD, W365 and Infrastructure as Code (IaC)</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 24 Feb 2024 09:43:55 +0100</lastBuildDate><atom:link href="/categories/esxi/index.xml" rel="self" type="application/rss+xml"/><item><title>Boot error: Shutting down firmware services... error after upgrading to VMware ESXi 6.7 Update 3</title><link>/2019/09/18/upgrading-to-esxi-6-7-update-3-results-in-shutting-down-firmware-services-error/</link><pubDate>Wed, 18 Sep 2019 12:12:05 +0000</pubDate><guid>/2019/09/18/upgrading-to-esxi-6-7-update-3-results-in-shutting-down-firmware-services-error/</guid><description>After upgrading one of my home lab servers to VMware ESXi 6.7 Update 3, I’ve got the following error when trying to boot:
Shutting down firmware services&amp;hellip;
Page allocation error: Out of resources
Failed to shutdown the boot services.
Unrecoverable error
After changing the boot mode from UEFI to &amp;ldquo;legacy only&amp;rdquo; in the BIOS, the ESXi host booted without the error.
VMware has confirmed that this is a bug. There is VMware community thread (link ) about this bug and two other workarounds.</description></item><item><title>Install Home Assistant Hass.io as Virtual Machine (VM) on VMware ESXi</title><link>/2019/04/03/installing-home-assistant-hass-io-as-virtual-machine-vm-on-vmware-esxi/</link><pubDate>Wed, 03 Apr 2019 11:10:17 +0000</pubDate><guid>/2019/04/03/installing-home-assistant-hass-io-as-virtual-machine-vm-on-vmware-esxi/</guid><description>I started exploring Home Assistant Hass.io on a Raspberry Pi. After several SD card crashes I decided to installed Hass.io as Virtual Machine (VM) on VMware ESXi. There is a VMDK version available (link ) that can attached (this involves manual steps) but I prefer a clean installation. VMware ESXi is installed on my Shuttle SH370R6 plus home lab server (link ).
Update: June 2021: Ubuntu is not supported anymore as Operating System for Home Assistant.</description></item><item><title>Quick tip: Create a bootable VMware ESXi stick</title><link>/2018/09/16/quick-tip-create-a-bootable-vmware-esxi-key/</link><pubDate>Sun, 16 Sep 2018 07:19:57 +0000</pubDate><guid>/2018/09/16/quick-tip-create-a-bootable-vmware-esxi-key/</guid><description>There are multiple tools available to create a bootable VMware ESXi USB stick/drive/key such as:
UNetbootin, link Rufus, link My favorite tool to create a VMware ESXi USB stick/key is Rufus. I use Rufus because it&amp;rsquo;s small, fast, Windows-based, open-sourced and the tool is updated frequently.
Requirements Requirements for creating a VMware ESXi key:
Windows Operating System (Windows 7 or later) Rufus download VMware ESXi ISO download. Create a USB Stick To create a VMware ESXi stick is easy.</description></item><item><title>Installing VMware ESXi fails on Cisco UCS Blades with FlexFlash SD cards</title><link>/2018/01/31/installing-vmware-esxi-fails-cisco-ucs-blade-flexflash-sd-cards/</link><pubDate>Wed, 31 Jan 2018 20:42:22 +0000</pubDate><guid>/2018/01/31/installing-vmware-esxi-fails-cisco-ucs-blade-flexflash-sd-cards/</guid><description>When implementing a new Cisco UCS environment I encountered the following error when trying to install VMware ESXi 6.5 on a Cisco UCS Blade server with a FlexFlash SD card:
Operation failed This program has encountered an error: partedUtil failed with message: &amp;ldquo;Error: Can’t have a a partition outside the disk! Unable to read partition table for device /vmfs/devices/disks&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.
The solutions is simple, perform a format of the SD card in UCSM before installing VMware ESXi.</description></item><item><title>Prevent corruption of the ESXi bootable SD card</title><link>/blog/2017/03/prevent-corruption-esxi-bootable-sd-card/</link><pubDate>Tue, 14 Mar 2017 14:55:14 +0000</pubDate><guid>/blog/2017/03/prevent-corruption-esxi-bootable-sd-card/</guid><description>To activate this feature the following advanced settings must be changed on each ESXi host:
Set the advanced ToolsRamdisk option to 1 by using this command:
[code language=&amp;ldquo;text&amp;rdquo;]esxcli system settings advanced set -o /UserVars/ToolsRamdisk -i 1 [/code]
After changing the setting reboot the host.
I created a simple PowerCLI script that sets the advanced setting `toolsRamdisk` value to &amp;lsquo;1&amp;rsquo; on all the ESXi hosts.
[code language=&amp;ldquo;PowerShell&amp;rdquo;] &amp;lt;# Author : Ivo Beerens Blog : www.</description></item><item><title>VMware ESXi6 Password Policy</title><link>/2015/10/07/vmware-esxi6-password-policy/</link><pubDate>Wed, 07 Oct 2015 10:08:48 +0000</pubDate><guid>/2015/10/07/vmware-esxi6-password-policy/</guid><description>With VMware ESXi 6 the password policy is changed and require to use more complex passwords. The password policy in ESXi 6 has the following requirements:
Passwords must contain characters from at least three character classes. Passwords containing characters from three character classes must be at least seven characters long. Passwords containing characters from all four character classes must be at least seven characters long. An uppercase character that begins a password does not count toward the number of character classes used.</description></item><item><title>VMware tools update fails on ESXi 6 hosts with Dutch Operating System VMs</title><link>/2015/05/04/vmware-tools-update-fails-on-esxi-6-hosts-with-dutch-operating-systems-vms/</link><pubDate>Mon, 04 May 2015 09:35:04 +0000</pubDate><guid>/2015/05/04/vmware-tools-update-fails-on-esxi-6-hosts-with-dutch-operating-systems-vms/</guid><description>After upgrading all the hosts in the lab environment to VMware ESXi 6, I tried to upgrade the VMware tools version of a Dutch Windows 7 golden VM used by VMware Horizon View. The VMware tools upgrade fails with the following message:
VMware Tools Setup Wizard ended prematurely
This is a known bug in VMware ESXi 6.0 with Dutch Operating System VMs (see KB, link ).
The following work around can be used:</description></item><item><title>VIBSearch Finding VIB versions</title><link>/2014/12/17/vibsearch-finding-vib-versions/</link><pubDate>Wed, 17 Dec 2014 09:28:56 +0000</pubDate><guid>/2014/12/17/vibsearch-finding-vib-versions/</guid><description>VIBSearch is a simple PowerShell script with a GUI that will search for a specified VIB or all the VIBS installed on the ESXi hosts. A VIB stands for vSphere Installation Bundle (VIB). VIBs are used to package and distribute ESXi software such as drivers. The GUI is designed with SAPIEN PowerShell Studio 2014.
With VIBSearch it is easily to verify that all the ESXi host in the cluster have the same VIB versions installed.</description></item><item><title>HP AMS driver problem in ESXi 5.x</title><link>/2014/10/23/hp-ams/</link><pubDate>Thu, 23 Oct 2014 14:58:06 +0000</pubDate><guid>/2014/10/23/hp-ams/</guid><description>The last weeks several customers contacted me that one or more ESXi hosts are not manageable anymore. The ESXi host has the following symptoms:
Unable to manage using the vSphere Client, Web Client or SSH. Unable to perform a vMotion On the ESXi console there is a message: can&amp;rsquo;t fork Enable services from the console does not work The VMs are still running on the ESXi host. This is a known issue and can occur when running the following versions of the HP AMS driver:</description></item><item><title>Reset the root password of an ESXi server</title><link>/2014/05/21/reset-the-root-password-on-an-esxi-server/</link><pubDate>Wed, 21 May 2014 14:02:30 +0000</pubDate><guid>/2014/05/21/reset-the-root-password-on-an-esxi-server/</guid><description>Some time ago I needed to make a SSH connection to a new installed ESXi server. The default root password the customer was using was not working. The admin who installed the ESXi server didn’t known the password anymore. So i needed to reset the password. The VMware Knowledge Base states the following on resetting the root password on ESXi:
Reinstalling the ESXi host is the only supported way to reset a password on ESXi.</description></item><item><title>vSphere 5.x NIC problems</title><link>/2014/02/27/vsphere-5-x-nic-problems/</link><pubDate>Thu, 27 Feb 2014 14:22:33 +0000</pubDate><guid>/2014/02/27/vsphere-5-x-nic-problems/</guid><description>Last week ik blogged about the “Broadcom adapter data corruption on ESXi/ESX hosts using the tg3 driver and TSO enabled” NIC problem. Link This week I found two new vSphere NIC issues worth to mention:
Hosts with virtual machines using the E1000/E1000E adapter have networking issues after upgrading to ESXi 5.1 U2 (2072694). Link ESXi 5.x host experiences a purple diagnostic screen mentioning E1000PollRxRing and E1000DevRx (2059053). Link</description></item><item><title>Watch out with Hardware Version 10 in VMware ESXi 5.5!</title><link>/2013/10/01/watch-out-with-hardware-version-10-in-vmware-esxi-5-5/</link><pubDate>Tue, 01 Oct 2013 13:33:08 +0000</pubDate><guid>/2013/10/01/watch-out-with-hardware-version-10-in-vmware-esxi-5-5/</guid><description>Update: 09-09-2014: Today VMware released a new vSphere Client (vSphere Windows client). With vSphere Client 5.5.0 Build 1993072 (available with ESXi 5.5 Update 2) it is possible to edit hardware version 10 VMs settings. When editing a hardware version 10 VM it is only possible to edit hardware version 8 features. If you want to edit the advanced VM settings available in higher hardware versions you need to use the vSphere Web Client.</description></item><item><title>Enable the vShield driver in VMware tools</title><link>/2013/07/11/enable-the-vshield-driver-in-vmware-tools/</link><pubDate>Thu, 11 Jul 2013 12:46:50 +0000</pubDate><guid>/2013/07/11/enable-the-vshield-driver-in-vmware-tools/</guid><description>One of the steps of a vShield Endpoint based deployment is to enable the vShield driver in VMware tools. The vShield driver is not enabled by default. This can be done manually or automatically for example in the golden image of a VDI desktop.
Here are the manually steps when the VMware tools already are installed:
In the vSphere client open a Console session Select VM – Guest – Install/Upgrade VMware Tools Choose Interactive Tools Upgrade In the VM open the setup program Choose Next Choose Modify Expand the VMCI Driver section, select vShield Drivers and select “This feature will be installed on the local hard drive” Next – modify If you are installing VMware Tools in a number of Windows virtual machines, you can automate its installation by using the following syntax:</description></item><item><title>Test your ESXi network resiliency with ESXCLI</title><link>/2013/05/01/test-your-esxi-network-resiliency-with-esxcli/</link><pubDate>Wed, 01 May 2013 08:12:39 +0000</pubDate><guid>/2013/05/01/test-your-esxi-network-resiliency-with-esxcli/</guid><description>After configuring the network portion for your ESXi servers you need to test if the redundancy is working as accepted. From the ESXi layer you can bringing down/up one or more uplinks to test the network resilience. No longer you need to pull out the UTP cables. Since ESXi5 this can be done by using the esxcli network nic down/up command.
First log in to ESXi using for example using Tech Support Mode</description></item><item><title>Windows 8 and Windows Server 2012 support on VMware ESXi, Workstation and Fusion</title><link>/2012/12/11/windows-8-and-windows-server-2012-support-on-vmware-esxi-workstation-and-fusion/</link><pubDate>Tue, 11 Dec 2012 12:39:03 +0000</pubDate><guid>/2012/12/11/windows-8-and-windows-server-2012-support-on-vmware-esxi-workstation-and-fusion/</guid><description>The following VMware releases are supported with Windows 8 and Windows Server 2012:
OS Supported versions Windows 8 32/64 Bits Workstation 9 Fusion 5.0 ESXi 5.0 U1 ESXi 5.1 Windows Server 2012 64 Bits Workstation 9 Fusion 5.0 ESXi 5.0 U1 ESXi 5.1 Windows 8 and Windows Server 2012 are supported on ESX 5.0 U1 and 5.1. Here are some things to watch when implementing Windows 8 or Windows Server 2012 on ESXi environment.</description></item><item><title>Nest Windows Server 2012 Hyper-V in VMware ESXi 5</title><link>/2012/06/28/nest-windows-server-2012-hyper-v-in-vmware-esxi-5/</link><pubDate>Thu, 28 Jun 2012 09:57:07 +0000</pubDate><guid>/2012/06/28/nest-windows-server-2012-hyper-v-in-vmware-esxi-5/</guid><description>In this blog post I explain how you can install Windows 2012 Server Release Candidate (RC) in VMware ESXi and enable the Hyper-V role. It is possible to build a Hyper-V cluster LAB and live migrate VMs between the virtual Hyper-V nodes on one VMware ESXi 5 host.
Before you begin make sure:
Windows 2012 Server RC ISO is place on a datastore VMware ESXi 5 Update 1 is installed with the latest updates To be able to boot 64bit guest OSes, make sure that on the VMware ESXi host the line below is added to the /etc/VMware/config file on your physical ESXi 5.</description></item><item><title>vSphere Syslog Collector troubleshooting</title><link>/2012/05/29/vsphere-syslog-collector-troubleshooting/</link><pubDate>Tue, 29 May 2012 08:40:33 +0000</pubDate><guid>/2012/05/29/vsphere-syslog-collector-troubleshooting/</guid><description>During a VMware health check, I noticed that the syslog files aren’t updated anymore in the repository from he vSphere Syslog Collector server.
Here are some basic steps I used to troubleshoot this problem.
VMware ESXi hosts On the VMware ESXi hosts check the following settings:
Syslog destination. Open the vSphere Client. On the ESXi server, open the configuration tab and select advanced Settings. Check the Syslog.global.logHost value. The format is: protocol://FQDN:port .</description></item><item><title>VMware ESXi 5 snapshot changes</title><link>/2012/04/20/vmware-esxi-5-snapshot-changes/</link><pubDate>Fri, 20 Apr 2012 08:45:42 +0000</pubDate><guid>/2012/04/20/vmware-esxi-5-snapshot-changes/</guid><description>In ESX(i) 3.x and 4.x snapshots files are default created in the virtual machine’s working directory (home directory). The working directory is the same directory as the were the virtual machine configuration (*.vmx) file is stored.
In this example a VM called “test” that has two disks (VMDK’s) placed on two datastores. The first disk is created on the VMFS01 datastore and the second disk is created on the VMFS02 datastore.</description></item><item><title>Quick tip: How to kill a VM with esxtop</title><link>/2012/02/29/kill-a-vm-in-resxtop/</link><pubDate>Wed, 29 Feb 2012 11:17:32 +0000</pubDate><guid>/2012/02/29/kill-a-vm-in-resxtop/</guid><description>There are different ways to kill an unresponsable VM by using the vCLI or the console. In VMware ESXi, it is possible to kill a running VM process by using esxtop or resxtop. For VMware ESXi you need to enter Tech Support Mode (TSM) first to run esxtop.
The following procedure can be used to kill a VM (The bold text are the commands to enter):
esxtop
Press c for the CPU resource screen Press shift + V to display VMs only Press f to change the display fields Press c to select the LWID (Leader World Id) and press enter Identify the VM by it’s LWID Press k Enter the LWID of the VM to kill and press enter Wait for 30 seconds and validate that the VM is no longer listed</description></item><item><title>Customize the VMware ESXi 5 installation media by adding the latest patches using Image Builder</title><link>/2012/02/13/add-the-latest-patches-to-the-vmware-esxi-5-installation-media/</link><pubDate>Mon, 13 Feb 2012 22:17:34 +0000</pubDate><guid>/2012/02/13/add-the-latest-patches-to-the-vmware-esxi-5-installation-media/</guid><description>When you want to customize the VMware ESXi 5 installation media you need to use Image Builder. Image Builder CLI is a set of PowerCLI cmdlets that you can use to manage vSphere image profiles and VIB (VMware Installation Bundle) packages, such as driver VIBs and update VIBs. You can also use Image Builder cmdlets to export an image profile to an ISO or offline depot ZIP file that you can use to install ESXi with a customized set of updates, patches, and drivers</description></item><item><title>Unable to create VMFS partition</title><link>/2011/12/19/unable-to-create-vmfs-partition/</link><pubDate>Mon, 19 Dec 2011 14:05:20 +0000</pubDate><guid>/2011/12/19/unable-to-create-vmfs-partition/</guid><description>On my home lab I tried to create a new VMFS volume on a RAID-0 disk set that was coming from another host. When creating the new VMFS volume from the vSphere client, the following error appeared:
Call “HostDatastoreSystem.QueryVmfsDatastoreCreateOptions” for object “datastoresystem-9” on vCenter Server “VC01″ failed.
On the VMware ESXi 5 server I enabled “Local Tech Support Mode”, so I was able to logging in directly on the console and used the fdisk-l command to see the partition information on the disk.</description></item><item><title>VMware ESXi 5 whitebox NIC support</title><link>/2011/12/13/vmware-esxi-5-whitebox-nic-support/</link><pubDate>Tue, 13 Dec 2011 15:44:34 +0000</pubDate><guid>/2011/12/13/vmware-esxi-5-whitebox-nic-support/</guid><description>I tested the NICs below in my VMware ESXi 5.x whitebox server at home. Here the status:
NICRecognized by VMware ESXi 5Listed in ESXi 5 asIntel PRO/1000GT Desktop Adapter PCIYesIntel 82541PI Gigabit Ethernet ControllerRealtek RTL 8111EYesRealtek 8168 Gigabit EthernetIntel Gigabit CT Desktop Adapter PCI-eYesIntel Corporation 82574LIntel 82579 Gigabit LAN controllerNo You need the make a customized ESXi 5 ISO or VIB file.This is a not supported configuration!Intel Corporation 82579V&amp;nbsp;orIntel Corporation 82579LMTo add for example the Intel 82579 chipset, create a customized ESXi 5 ISO.</description></item><item><title>Migrate to VMware ESXi? Use the &amp;ldquo;ESX System Analyzer&amp;rdquo; tool</title><link>/2011/12/05/tool-esx-system-analyzer/</link><pubDate>Mon, 05 Dec 2011 18:31:53 +0000</pubDate><guid>/2011/12/05/tool-esx-system-analyzer/</guid><description>VMware Flings did it again. They released another cool tool called “ESX System Analyzer”. This tool helps when you want to migrate from VMware ESX to VMware ESXi. It scans the VMware environment and collects the following information:
Hardware compatibility with ESXi. It checks if the hardware is compatible with ESXi 4 and ESXi 5. VMs registered on the ESX host, as well as VMs located on the host’s local disk Modifications to the Service Console</description></item><item><title>Create a VMware ESXi 5 PXE unattended scripted installation using Windows</title><link>/2011/09/20/create-vmware-esxi-5-pxe-unattended-scripted-installation-using-windows/</link><pubDate>Tue, 20 Sep 2011 13:53:30 +0000</pubDate><guid>/2011/09/20/create-vmware-esxi-5-pxe-unattended-scripted-installation-using-windows/</guid><description>The most information available on how-to perform a unattended scripted installation of VMware ESXi 5 is based on Linux. Here is a procedure how-to create a scripted installation of VMware ESXi 5 using Microsoft Windows.
Here is an overview of the boot process:
What do we need The following software must be downloaded:
Syslinux 3.86 (This is the Syslinux version VMware supports) FileZilla Server 0_9_39 TFTPD 4.00 Notepad ++ VMware ESXi 5 ISO Step 1 Windows XP This procedure is tested with Microsoft Windows XP SP2.</description></item><item><title>Create a bootable VMware ESXi 5 USB stick in Windows and perform a scripted installation</title><link>/2011/09/17/create-a-bootable-vmware-esxi-5-usb-stick-in-windows-and-perform-a-scripted-installation/</link><pubDate>Sat, 17 Sep 2011 16:42:10 +0000</pubDate><guid>/2011/09/17/create-a-bootable-vmware-esxi-5-usb-stick-in-windows-and-perform-a-scripted-installation/</guid><description>Here is a simple procedure to make a bootable VMware ESXi 5 or ESXi 6 USB stick in Windows and perform a scripted unattended VMware ESXi installation. The 5 steps are:
Step 1 Be sure removing all partitions and format a FAT32 partition on the USB stick by using the following command:
Open the command prompt and enter the following commands:
diskpart (make sure you run diskpart as administrator) list disk (list the disk in your system including the USB) select disk USB number clean create partition primary active format fs=fat32 quickassignexit Step 2 Download the Windows LinuxLive USB creator utility here .</description></item><item><title>Upgrading to VMware ESXi 5</title><link>/2011/08/18/upgrading-to-vmware-esxi-5/</link><pubDate>Thu, 18 Aug 2011 14:52:56 +0000</pubDate><guid>/2011/08/18/upgrading-to-vmware-esxi-5/</guid><description>The following three supported upgrade methods to VMware ESXi 5 are available:
Upgrade Method ESX or ESXI to ESXi5 Upgrade or Patch from ESXi 5 to ESXi 5.x vSphere Update Manager yes yes Interactive upgrade from CD, DVD, or USB drive yes yes Scripted upgrade yes yes vSphere Auto Deploy no yes esxcli no yes It is not supported to directly upgrade ESX(i) 3.x to ESXi 5. You must first upgrade ESX(i) 3 to ESX(i) 4 before upgrading to ESXi 5.</description></item><item><title>Unable to commit snapshot after VADP backup</title><link>/2011/05/02/unable-to-commit-snapshot-after-vadp-backup/</link><pubDate>Mon, 02 May 2011 14:15:53 +0000</pubDate><guid>/2011/05/02/unable-to-commit-snapshot-after-vadp-backup/</guid><description>hen doing a health check I found the following error during the remove if a snapshot in vCenter:
Unable to access file since it is locked
There is a problem when committing the snapshot after the vStorage APIs for Data Protection (VADP) backup of the VM.
In the snapshot manager in vCenter there was no snapshot visible. I needed the be sure that no snapshot is active in the background. This can be very dangerous when snapshots still active and grows.</description></item><item><title>VMware, Microsoft and Starwind software updates</title><link>/2011/02/18/vmware-microsoft-and-starwind-software-updates/</link><pubDate>Fri, 18 Feb 2011 12:36:06 +0000</pubDate><guid>/2011/02/18/vmware-microsoft-and-starwind-software-updates/</guid><description>Last weeks a lots of software updates and new releases are published. Here’s an overview of some of them:
VMware VMware vSphere 4.1 Update 1 A new update for vSphere 4.1 is released. Here are the ESX(i) and vCenter improvements:
VMware ESX(i) 4.1 Update 1 improvements Enablement of Trusted Execution Technology (TXT) — ESXi 4.1 Update 1 can be configured to boot with Intel Trusted Execution Technology (TXT). This boot option can protect ESXi in some cases where system binaries are corrupted or have been tampered with.</description></item><item><title>Install VMware ESXi 4.1 from bootable USB stick</title><link>/2010/10/25/install-vmware-esxi-4-1-from-bootable-usb-stick/</link><pubDate>Mon, 25 Oct 2010 08:00:00 +0000</pubDate><guid>/2010/10/25/install-vmware-esxi-4-1-from-bootable-usb-stick/</guid><description>Not all servers nowadays have a DVD player installed. Sometimes it is handy to boot from USB and installing a single VMware ESXi server. Here’s a example how to make the USB stick bootable and install VMware ESXi 4.1 from it by using Windows.
Preparation:
Need 1GB USB memory stick or more. Download the VMware ESXi 4.1 ISO named VMware-VMvisor-Installer-4.1.0-260247.x86_64.iso (In this example I used the VMware vSphere Hypervisor version). Update: The latest version of VMware ESXi is 4.</description></item></channel></rss>